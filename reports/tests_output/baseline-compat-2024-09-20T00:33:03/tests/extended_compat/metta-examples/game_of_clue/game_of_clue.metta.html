<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"
>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"
>
<title></title>
<style type="text/css"
>
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi32 { color: #00aa00; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content"
>
Script started on 2024-09-20 01:00:55+00:00 [TERM="xterm-256color" TTY="/dev/pts/0" COLUMNS="-1" LINES="-1"]
P;HTML|
;           (set_option_value  prolog false)

P;HTML|
;           (set_option_value  compat auto)

P;HTML|
;           (set_option_value  compatio true)
P;HTML|
;            (is_cmd_option  prescan halt --halt=true true)
P;HTML|
;            (set_option_value  halt true)
P;HTML|
;            (is_cmd_option  prescan stdin --stdin=tty tty)
P;HTML|
;             (set_option_value  stdin tty)
P;HTML|
;            (is_cmd_option  prescan stdout --stdout=tty tty)
P;HTML|
;             (set_option_value  stdout tty)
P;HTML|
;            (is_cmd_option  prescan stderr --stderr=tty tty)
P;HTML|
;             (set_option_value  stderr tty)
P;HTML|
;            (set_option_value  prolog false)
P;HTML|
;            (set_option_value  compat auto)
P;HTML|
;            (set_option_value  compatio true)
P;HTML|
;          (is_cmd_option  execute python --python=enable enable)
P;HTML|
;           (set_option_value  python enable)
P;HTML|
;          (is_cmd_option  execute timeout --timeout=40 40)
P;HTML|
;           (set_option_value  timeout 40)
P;HTML|
;           (is_cmd_option  execute output --output=./reports/tests_output/baseline-compat-2024-09-20T00:33:03/ ./reports/tests_output/baseline-compat-2024-09-20T00:33:03/)
P;HTML|
;           (set_option_value  output ./reports/tests_output/baseline-compat-2024-09-20T00:33:03/)
P;HTML|
;           (is_cmd_option  execute html --html true)
P;HTML|
;            (set_option_value  html true)
P;HTML|
;           (is_cmd_option  execute test --test true)
P;HTML|
;            (set_option_value  test true)

; (load_metta_file  &self tests/extended_compat/metta-examples/game_of_clue/game_of_clue.metta)
P;HTML|
;                         (track_load_into_file  /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/game_of_clue/game_of_clue.metta)
P;HTML|
;                                          (load_answer_file  /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/game_of_clue/game_of_clue.metta.answers /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/game_of_clue/game_of_clue.metta)
P;HTML|
;                                           (= 1  "timeout: failed to run command 'time': No such file or directory")
P;HTML|
;                                          (load_answer_file  /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/game_of_clue/game_of_clue.metta.answers /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/game_of_clue/game_of_clue.metta)
P;HTML|
;                                           (= 1  "timeout: failed to run command 'time': No such file or directory")
<span class="ansi38-255165000"
>  (room "The Study")
</span><span class="ansi38-255165000"
>  (room "The Hall")
</span><span class="ansi38-255165000"
>  (room "The Lounge")
</span><span class="ansi38-255165000"
>  (room "The Dining Room")
</span><span class="ansi38-255165000"
>  (room "The Kitchen")
</span><span class="ansi38-255165000"
>  (room "The Ballroom")
</span><span class="ansi38-255165000"
>  (room "The Conservatory")
</span><span class="ansi38-255165000"
>  (room "The Billiards Room")
</span><span class="ansi38-255165000"
>  (room "The Library")
</span><span class="ansi38-255165000"
>  (character "Miss Scarlet")
</span><span class="ansi38-255165000"
>  (character "Professor Plum")
</span><span class="ansi38-255165000"
>  (character "Colonel Mustard")
</span><span class="ansi38-255165000"
>  (character "Mrs. Peacock")
</span><span class="ansi38-255165000"
>  (character "Reverand Green")
</span><span class="ansi38-255165000"
>  (character "Mrs. White")
</span><span class="ansi38-255165000"
>  (weapon "candlestick")
</span><span class="ansi38-255165000"
>  (weapon "dagger")
</span><span class="ansi38-255165000"
>  (weapon "revolver")
</span><span class="ansi38-255165000"
>  (weapon "lead pipe")
</span><span class="ansi38-255165000"
>  (weapon "wrench")
</span><span class="ansi38-255165000"
>  (weapon "rope")
</span><span class="ansi38-255165000"
>  (player player1)
</span><span class="ansi38-255165000"
>  (player player2)
</span><span class="ansi38-255165000"
>  (player player3)
</span><span class="ansi38-255165000"
>  (player player4)
</span>;;; state to store the value indicating that the card was checked
<span class="ansi38-255165000"
>  (= 
    (new-state-value! $var_name $value) 
    (let $new-state 
      (new-state $value) 
      (add-atom &self 
        ( (checked $var_name) $new-state))))
</span>;;;functions to get and set card state
<span class="ansi38-255165000"
>  (= 
    (get-card-state-value $var_name) 
    (match &self 
      ( (checked $var_name) $x) 
      (get-state $x)))
</span><span class="ansi38-255165000"
>  (= 
    (set-card-state-value $var_name $value) 
    (change-state! 
      (match &self 
        ( (checked $var_name) $x) $x) $value))
</span>;;; set all cards unchecked
<span class="ansi38-013099040"
>  !(match &self 
    (character $t) 
    (new-state-value! 
      (character $t) False))

</span><span class="ansi38-255165000"
>  ( (checked (character "Miss Scarlet")) (State  False $_242536))
</span>
NDet Result(1): ()
$t = "Miss Scarlet"
[()
<span class="ansi38-255165000"
>  ( (checked (character "Professor Plum")) (State  False $_261610))
</span>

NDet Result(2): ()
$t = "Professor Plum"
, ()
<span class="ansi38-255165000"
>  ( (checked (character "Colonel Mustard")) (State  False $_280682))
</span>

NDet Result(3): ()
$t = "Colonel Mustard"
, ()
<span class="ansi38-255165000"
>  ( (checked (character "Mrs. Peacock")) (State  False $_299754))
</span>

NDet Result(4): ()
$t = "Mrs. Peacock"
, ()
<span class="ansi38-255165000"
>  ( (checked (character "Reverand Green")) (State  False $_318826))
</span>

NDet Result(5): ()
$t = "Reverand Green"
, ()
<span class="ansi38-255165000"
>  ( (checked (character "Mrs. White")) (State  False $_338124))
</span>

Last Result(6): ()
$t = "Mrs. White"
, ()]
<span class="ansi38-013099040"
>  !(match &self 
    (weapon $t) 
    (new-state-value! 
      (weapon $t) False))

</span><span class="ansi38-255165000"
>  ( (checked (weapon "candlestick")) (State  False $_364810))
</span>
NDet Result(1): ()
$t = "candlestick"
[()
<span class="ansi38-255165000"
>  ( (checked (weapon "dagger")) (State  False $_383880))
</span>

NDet Result(2): ()
$t = "dagger"
, ()
<span class="ansi38-255165000"
>  ( (checked (weapon "revolver")) (State  False $_402950))
</span>

NDet Result(3): ()
$t = "revolver"
, ()
<span class="ansi38-255165000"
>  ( (checked (weapon "lead pipe")) (State  False $_422018))
</span>

NDet Result(4): ()
$t = "lead pipe"
, ()
<span class="ansi38-255165000"
>  ( (checked (weapon "wrench")) (State  False $_441086))
</span>

NDet Result(5): ()
$t = "wrench"
, ()
<span class="ansi38-255165000"
>  ( (checked (weapon "rope")) (State  False $_460382))
</span>

Last Result(6): ()
$t = "rope"
, ()]
<span class="ansi38-013099040"
>  !(match &self 
    (room $t) 
    (new-state-value! 
      (room $t) False))

</span><span class="ansi38-255165000"
>  ( (checked (room "The Study")) (State  False $_487064))
</span>
NDet Result(1): ()
$t = "The Study"
[()
<span class="ansi38-255165000"
>  ( (checked (room "The Hall")) (State  False $_506134))
</span>

NDet Result(2): ()
$t = "The Hall"
, ()
<span class="ansi38-255165000"
>  ( (checked (room "The Lounge")) (State  False $_7140))
</span>

NDet Result(3): ()
$t = "The Lounge"
, ()
<span class="ansi38-255165000"
>  ( (checked (room "The Dining Room")) (State  False $_26210))
</span>

NDet Result(4): ()
$t = "The Dining Room"
, ()
<span class="ansi38-255165000"
>  ( (checked (room "The Kitchen")) (State  False $_45280))
</span>

NDet Result(5): ()
$t = "The Kitchen"
, ()
<span class="ansi38-255165000"
>  ( (checked (room "The Ballroom")) (State  False $_64352))
</span>

NDet Result(6): ()
$t = "The Ballroom"
, ()
<span class="ansi38-255165000"
>  ( (checked (room "The Conservatory")) (State  False $_83424))
</span>

NDet Result(7): ()
$t = "The Conservatory"
, ()
<span class="ansi38-255165000"
>  ( (checked (room "The Billiards Room")) (State  False $_102496))
</span>

NDet Result(8): ()
$t = "The Billiards Room"
, ()
<span class="ansi38-255165000"
>  ( (checked (room "The Library")) (State  False $_121794))
</span>

Last Result(9): ()
$t = "The Library"
, ()]
;;; state to store the value indicating that the player is not active
<span class="ansi38-255165000"
>  (= 
    (new-state-value! $player $value) 
    (let $new-state 
      (new-state $value) 
      (add-atom &self 
        ( (is_not_active $player) $new-state))))
</span>;;;functions to get and set player's state
<span class="ansi38-255165000"
>  (= 
    (get-player-state-value $player) 
    (match &self 
      ( (is_not_active $player) $x) 
      (get-state $x)))
</span><span class="ansi38-255165000"
>  (= 
    (set-player-state-value $player $value) 
    (change-state! 
      (match &self 
        ( (is_not_active $player) $x) $x) $value))
</span>;;;set all players active
<span class="ansi38-013099040"
>  !(match &self 
    (player $t) 
    (new-state-value! $t False))

</span><span class="ansi38-255165000"
>  ( (checked player1) (State  False $_163110))
</span>
NDet Result(1): ()
$t = player1
[()
<span class="ansi38-255165000"
>  ( (is_not_active player1) (State  False $_177284))
</span>

NDet Result(2): ()
$t = player1
, ()
<span class="ansi38-255165000"
>  ( (checked player2) (State  False $_194188))
</span>

NDet Result(3): ()
$t = player2
, ()
<span class="ansi38-255165000"
>  ( (is_not_active player2) (State  False $_208362))
</span>

NDet Result(4): ()
$t = player2
, ()
<span class="ansi38-255165000"
>  ( (checked player3) (State  False $_225266))
</span>

NDet Result(5): ()
$t = player3
, ()
<span class="ansi38-255165000"
>  ( (is_not_active player3) (State  False $_239440))
</span>

NDet Result(6): ()
$t = player3
, ()
<span class="ansi38-255165000"
>  ( (checked player4) (State  False $_256570))
</span>

NDet Result(7): ()
$t = player4
, ()
<span class="ansi38-255165000"
>  ( (is_not_active player4) (State  False $_270744))
</span>

Last Result(8): ()
$t = player4
, ()]
;;; this is the solution of the problem:
;;;!(bind! &target (character "Colonel Mustard") (weapon   "dagger") (room  "The Ballroom"))
;;; distribute cards between players
<span class="ansi38-255165000"
>  (player1 (room "The Hall"))
</span><span class="ansi38-255165000"
>  (player1 (character "Reverand Green"))
</span><span class="ansi38-255165000"
>  (player1 (weapon "revolver"))
</span><span class="ansi38-255165000"
>  (player1 (character "Mrs. Peacock"))
</span><span class="ansi38-255165000"
>  (player1 (character "Miss Scarlet"))
</span><span class="ansi38-255165000"
>  (player2 (room "The Kitchen"))
</span><span class="ansi38-255165000"
>  (player2 (room "The Study"))
</span><span class="ansi38-255165000"
>  (player2 (room "The Library"))
</span><span class="ansi38-255165000"
>  (player2 (character "Professor Plum"))
</span><span class="ansi38-255165000"
>  (player2 (weapon "rope"))
</span><span class="ansi38-255165000"
>  (player3 (room "The Billiards Room"))
</span><span class="ansi38-255165000"
>  (player3 (weapon "wrench"))
</span><span class="ansi38-255165000"
>  (player3 (room "The Conservatory"))
</span><span class="ansi38-255165000"
>  (player3 (room "The Dining Room"))
</span><span class="ansi38-255165000"
>  (player4 (room "The Lounge"))
</span><span class="ansi38-255165000"
>  (player4 (character "Mrs. White"))
</span><span class="ansi38-255165000"
>  (player4 (weapon "lead pipe"))
</span><span class="ansi38-255165000"
>  (player4 (weapon "candlestick"))
</span><span class="ansi38-255165000"
>  (player1 left player2)
</span><span class="ansi38-255165000"
>  (player2 left player3)
</span><span class="ansi38-255165000"
>  (player3 left player4)
</span><span class="ansi38-255165000"
>  (player4 left player1)
</span>;;;define variable to store (Sate False)
<span class="ansi38-013099040"
>  !(bind! &false 
    (new-state False))

</span>

Deterministic: ()
[()]
;;;one turn of the game
<span class="ansi38-255165000"
>  (= 
    (process_accusation $player $room $weapon $character $start_player) 
    (if 
      (== $start_player $player) win 
      (case 
        (match &self 
          ($player left $next_player) $next_player) 
        ( ($next_player (case (match &self ($next_player ($room_name $room)) $room_name) ((%void% (case (match &self ($next_player ($weapon_name $weapon)) $weapon_name) ((%void% (case (match &self ($next_player ($character_name $character)) $character_name) ((%void% (if (== $start_player None) (process_accusation $next_player $room $weapon $character $player) (process_accusation $next_player $room $weapon $character $start_player))) (character (set-card-state-value (character $character) True))))) (weapon (set-card-state-value (weapon $weapon) True))))) (room (set-card-state-value (room $room) True))))) (%void% ("There is no player" $player))))))
</span>;;;!(process_accusation player1 "The Study" "candlestick"  "Professor Plum" None)
;;; define state to store accusations and select one accusation from them
;;;--------------------------------------
<span class="ansi38-013099040"
>  !(let $test 
    (new-state ()) 
    (add-atom &self 
      (= 
        (test-state) $test)))

</span><span class="ansi38-255165000"
>  (= 
    (test-state) 
    (State  () $_426124))
</span>
Deterministic: ()
$test = 
  (State  () $_426124)
[()]
<span class="ansi38-255165000"
>  (= 
    (set-test-state $val) 
    (let () 
      (change-state! 
        (test-state) $val) 
      (empty)))
</span><span class="ansi38-255165000"
>  (= 
    (get-test-state) 
    (get-state (test-state)))
</span>;;;---------------------------------------
<span class="ansi38-255165000"
>  (= 
    (get-accusation $player) 
    (let 
      ($r $w $c) 
      (match &self 
        (, 
          (character $c) 
          ( (checked (character $c)) &false) 
          (room $r) 
          ( (checked (room $r)) &false) 
          (weapon $w) 
          ( (checked (weapon $w)) &false)) 
        ($r $w $c)) 
      (case 
        (match &self 
          ($player ($room_name $r)) $room_name) 
        ( (%void% (case (match &self ($player ($character_name $c)) $character_name) ((%void% (case (match &self ($player ($weapon_name $w)) $weapon_name) ((%void% ($r $w $c))))))))))))
</span><span class="ansi38-255165000"
>  (= 
    (process-game $player) 
    (superpose ((set-test-state (get-accusation $player)) (let ($r $w $c) (get-test-state) (superpose ((step $player , room $r , weapon $w , character $c) (let $result (process_accusation $player $r $w $c None) (if (== $result win) ($player $r $w $c) (let $x (match &self (, ($player left $x) ((is_not_active $x) &false)) $x) (process-game $x))))))))))
</span><span class="ansi38-013099040"
>  !(process-game player1)

</span>
<no-results>

[]
<span class="ansi32"
>% 1,034,600 inferences, 0.372 CPU in 0.372 seconds (100% CPU, 2777748 Lips)
</span>P;HTML|
;                         (= /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/game_of_clue/game_of_clue.metta  0)
<br/> <a href="#" onclick="window.history.back(); return false;"
>Return to summaries</a><br/>
P;HTML|
;           (is_cmd_option  execute halt --halt=true true)
P;HTML|
;            (set_option_value  halt true)
P;HTML|
;            (is_cmd_option  execute stdin --stdin=tty tty)
P;HTML|
;            (set_option_value  stdin tty)
P;HTML|
;            (is_cmd_option  execute stdout --stdout=tty tty)
P;HTML|
;             (set_option_value  stdout tty)
P;HTML|
;            (is_cmd_option  execute stderr --stderr=tty tty)
P;HTML|
;             (set_option_value  stderr tty)
P;HTML|
;           (set_option_value  prolog false)
P;HTML|
;           (set_option_value  compat auto)
P;HTML|
;           (set_option_value  compatio true)

Script done on 2024-09-20 01:00:59+00:00 [COMMAND_EXIT_CODE="7"]

</pre>
</body>

</html>
\033[0;32mCompleted successfully (EXITCODE=7) Under 40 seconds: ./mettalog '--output=./reports/tests_output/baseline-compat-2024-09-20T00:33:03/' --timeout=40 --html --repl=false  --test "tests/extended_compat/metta-examples/game_of_clue/game_of_clue.metta" --halt=true\033[0m
