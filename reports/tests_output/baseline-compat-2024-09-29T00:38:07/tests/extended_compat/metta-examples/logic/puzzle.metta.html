<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"
>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"
>
<title></title>
<style type="text/css"
>
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi32 { color: #00aa00; }
.ansi36 { color: #00aaaa; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165009 { color: #FFA509; }
.ansi38-255238088 { color: #FFEE58; }
.ansi38-013099040 { color: #0D6328; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content"
>
Script started on 2024-09-29 01:06:24+00:00 [TERM="xterm-256color" TTY="/dev/pts/0" COLUMNS="-1" LINES="-1"]
P;HTML|
;           (set_option_value  prolog false)

P;HTML|
;           (set_option_value  compat auto)

P;HTML|
;           (set_option_value  compatio true)
P;HTML|
;            (is_cmd_option  prescan halt --halt=true true)
P;HTML|
;            (set_option_value  halt true)
P;HTML|
;            (is_cmd_option  prescan stdin --stdin=tty tty)
P;HTML|
;             (set_option_value  stdin tty)
P;HTML|
;            (is_cmd_option  prescan stdout --stdout=tty tty)
P;HTML|
;             (set_option_value  stdout tty)
P;HTML|
;            (is_cmd_option  prescan stderr --stderr=tty tty)
P;HTML|
;             (set_option_value  stderr tty)
P;HTML|
;            (set_option_value  prolog false)
P;HTML|
;            (set_option_value  compat auto)
P;HTML|
;            (set_option_value  compatio true)
P;HTML|
;          (is_cmd_option  execute python --python=enable enable)
P;HTML|
;           (set_option_value  python enable)
P;HTML|
;          (is_cmd_option  execute timeout --timeout=40 40)
P;HTML|
;           (set_option_value  timeout 40)
P;HTML|
;           (is_cmd_option  execute output --output=./reports/tests_output/baseline-compat-2024-09-29T00:38:07/ ./reports/tests_output/baseline-compat-2024-09-29T00:38:07/)
P;HTML|
;           (set_option_value  output ./reports/tests_output/baseline-compat-2024-09-29T00:38:07/)
P;HTML|
;           (is_cmd_option  execute html --html true)
P;HTML|
;            (set_option_value  html true)
P;HTML|
;           (is_cmd_option  execute test --test true)
P;HTML|
;            (set_option_value  test true)

; (load_metta_file  &self tests/extended_compat/metta-examples/logic/puzzle.metta)
P;HTML|
;                         (track_load_into_file  /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/logic/puzzle.metta)
P;HTML|
;                                          (load_answer_file  /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/logic/puzzle.metta.answers /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/logic/puzzle.metta)
P;HTML|
;                                           (= 1  "[None, None, None, None, None, (Cons (Cons ivan (Cons cashier (Cons no_sister Nil))) (Cons (Cons boris (Cons controller (Cons has_sister Nil))) (Cons (Cons semyon (Cons supervisor (Cons $v6#17 Nil))) Nil))), None]")
P;HTML|
;                                           (= 2  "6.05user 0.03system 0:06.08elapsed 99%CPU (0avgtext+0avgdata 57420maxresident)k")
P;HTML|
;                                           (= 2  "0inputs+0outputs (0major+9554minor)pagefaults 0swaps")
P;HTML|
;                                          (load_answer_file  /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/logic/puzzle.metta.answers /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/logic/puzzle.metta)

;;;  The bank employs three people: Boris, Ivan, Semyon
;;;  There are positions of supervisor, cashier, controller
;;;  The cashier has no siblings and is the shortest in stature.
;;;  Semyon is married to Boris's sister and is higher than the controller.
;;;  determine who has what position
<span class="ansi38-255165000"
>  (: List 
    (-> $t Type))
</span><span class="ansi38-255165000"
>  (: Nil 
    (List $t))
</span><span class="ansi38-255165000"
>  (: Cons 
    (-> $t 
      (List $t) 
      (List $t)))
</span>;;; convert (a b c) to (Cons a (Cons b (Cons c Nil)))
<span class="ansi38-255165000"
>  (: makelist 
    (-> Atom 
      (List $t)))
</span><span class="ansi38-255165000"
>  (= 
    (makelist $x) 
    (if 
      (== () $x) Nil 
      (let $cdr 
        (cdr-atom $x) 
        (Cons 
          (car-atom $x) 
          (makelist $cdr)))))
</span>;;; works like ,/2
<span class="ansi38-255165000"
>  (: and-seq 
    (-> Atom Atom Bool))
</span><span class="ansi38-255165000"
>  (= 
    (and-seq $first $second) 
    (if $first $second False))
</span>;;; direct translation of prolog code for member/2
<span class="ansi38-255165000"
>  (= 
    (memb $X Nil) False)
</span>;;; member(X, [X|_]).
<span class="ansi38-255165000"
>  (= 
    (memb $X 
      (Cons $X $Tail)) True)
</span>;;;member(X, [_|Tail]) :-
;;;  member(X, Tail).
<span class="ansi38-255165000"
>  (= 
    (memb $X 
      (Cons $H $Tail)) 
    (memb $X $Tail))
</span><span class="ansi38-255165000"
>  (= 
    (same $X $X) True)
</span>;;; works like =/2
<span class="ansi38-255165000"
>  (= 
    (eq $X $Y) 
    (let $C 
      (same $X $Y) 
      (if 
        (== $C True) True False)))
</span><span class="ansi38-255165000"
>  (= 
    (is-variable $x) 
    (let $type 
      (get-metatype $x) 
      (if 
        (== $type Variable) True False)))
</span><span class="ansi38-255165000"
>  (= 
    (nth-var-iter $index 
      (Cons $H $Tail) $item $base) 
    (nth-var $Tail $item $H $base $index))
</span><span class="ansi38-255165000"
>  (= 
    (nth-var $List $item $item $base $base) True)
</span><span class="ansi38-255165000"
>  (= 
    (nth-var 
      (Cons $H $Tail) $item $prev_head $N $base) 
    (let $M 
      (+ $N 1) 
      (nth-var $Tail $item $H $M $base)))
</span><span class="ansi38-255165000"
>  (= 
    (nth $index Nil $item $base) False)
</span><span class="ansi38-255165000"
>  (= 
    (nth $index 
      (Cons $H $Tail) $item $base) 
    (if 
      (is-variable $index) 
      (nth-var-iter $index 
        (Cons $H $Tail) $item $base) 
      (nth-det $index 
        (Cons $H $Tail) $item $base)))
</span>;;; works like nth0_det from swipl lists.pl, won't work with $index as variable
<span class="ansi38-255165000"
>  (= 
    (nth-det $index Nil $item $base) False)
</span><span class="ansi38-255165000"
>  (= 
    (nth-det $index 
      (Cons $H $Tail) $item $base) 
    (if 
      (eq $index $base) 
      (eq $H $item) 
      (nth-det 
        (- $index 1) $Tail $item 1)))
</span><span class="ansi38-255165000"
>  (= 
    (nth1 $index $list $item) 
    (nth $index $list $item 1))
</span><span class="ansi38-255165000"
>  (= 
    (nextto $x $y $list) 
    (let $r 
      (nextto-impl $x $y $list) 
      (if 
        (== $r True) $r False)))
</span>;;; nextto(X, Y, [X,Y|_]).
<span class="ansi38-255165000"
>  (= 
    (nextto-impl $x $y 
      (Cons $x 
        (Cons $y $Tail))) True)
</span>;;; nextto(X, Y, [_|Zs]) :-
;;;      nextto(X, Y, Zs).
<span class="ansi38-255165000"
>  (= 
    (nextto-impl $x $y 
      (Cons $head $Tail)) 
    (nextto-impl $x $y $Tail))
</span>;;;foo :-
;;;    Employees=[_ , _ , _],
;;;%    /Boris has sister/
;;;    member([boris, _ , has_sister], Employees),
;;;%    /cashier is the shortest and has no sister/
;;;    nth1(1, Employees, [ _ , cashier, no_sister]),
;;;%    /Semyon is higher than controller/
;;;    nextto([ _ , controller, _], [semyon, _ , _ ], Employees),
;;;    member([ivan, _ , _ ], Employees),
;;;    member([_, supervisor, _], Employees),
;;;    print(Employees), nl.
<span class="ansi38-255165000"
>  (= 
    (foo $Employees) 
    (and-seq 
      (eq $Employees 
        (makelist ($A $B $C))) 
      (and-seq 
        (memb 
          (makelist (boris $Y has_sister)) $Employees) 
        (and-seq 
          (nth1 1 $Employees 
            (makelist ($Z cashier no_sister))) 
          (and-seq 
            (nextto 
              (makelist ($p controller $v)) 
              (makelist (semyon $v1 $v2)) $Employees) 
            (and-seq 
              (memb 
                (makelist (ivan $v3 $v4)) $Employees) 
              (memb 
                (makelist ($v5 supervisor $v6)) $Employees)))))))
</span><span class="ansi38-255165009"
>;; In file as:  
</span><span class="ansi1 ansi38-255238088"
>  !(let $r 
    (foo $Employees) 
    (if $r $Employees None))
</span>;; To unit test case:
<span class="ansi38-013099040"
>  !(assertEqualToResult 
    (let $r 
      (foo $Employees) 
      (if $r $Employees None)) 
    (None None None None None 
      (Cons 
        (Cons ivan 
          (Cons cashier 
            (Cons no_sister Nil))) 
        (Cons 
          (Cons boris 
            (Cons controller 
              (Cons has_sister Nil))) 
          (Cons 
            (Cons semyon 
              (Cons supervisor 
                (Cons $v6#17 Nil))) Nil))) None))

</span>[

;<h3 id="LOGIC.PUZZLE.01"
>;; LOGIC.PUZZLE.01</h3>
; 
; EVAL TEST
; took 0.402 secs. (401.74 milliseconds) 

  !(assertEqualToResult 
    (let $r 
      (foo $Employees) 
      (if $r $Employees None)) 
    (None None None None None 
      (Cons 
        (Cons ivan 
          (Cons cashier 
            (Cons no_sister Nil))) 
        (Cons 
          (Cons boris 
            (Cons controller 
              (Cons has_sister Nil))) 
          (Cons 
            (Cons semyon 
              (Cons supervisor 
                (Cons $v6#17 Nil))) Nil))) None))

<span class="ansi36"
>  (loonit_success  
    (equal_enough_for_test  
      (None None None None None None None None None None None None None None None None None None None None None None None None 
        (Cons 
          (Cons ivan 
            (Cons cashier 
              (Cons no_sister Nil))) 
          (Cons 
            (Cons boris 
              (Cons controller 
                (Cons has_sister Nil))) 
            (Cons 
              (Cons semyon 
                (Cons supervisor 
                  (Cons $_5150 Nil))) Nil))) None None None None None None None None None None None None None None None None None None None None None None None None None None None None None None None None None None None None None None None) 
      (None None None None None 
        (Cons 
          (Cons ivan 
            (Cons cashier 
              (Cons no_sister Nil))) 
          (Cons 
            (Cons boris 
              (Cons controller 
                (Cons has_sister Nil))) 
            (Cons 
              (Cons semyon 
                (Cons supervisor 
                  (Cons $_5150 Nil))) Nil))) None)))
</span>
Deterministic: ()
()]
<span class="ansi32"
>% 2,573,792 inferences, 0.499 CPU in 0.499 seconds (100% CPU, 5162926 Lips)
</span>P;HTML|
;                         (= /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/logic/puzzle.metta  0)
<span class="ansi1"
>LoonIt Report
</span>------------
<span class="ansi32"
>Successes: 1
</span><span class="ansi32"
>Failures: 0
</span><br/> <a href="#" onclick="window.history.back(); return false;"
>Return to summaries</a><br/>
P;HTML|
;           (is_cmd_option  execute halt --halt=true true)
P;HTML|
;            (set_option_value  halt true)
P;HTML|
;            (is_cmd_option  execute stdin --stdin=tty tty)
P;HTML|
;            (set_option_value  stdin tty)
P;HTML|
;            (is_cmd_option  execute stdout --stdout=tty tty)
P;HTML|
;             (set_option_value  stdout tty)
P;HTML|
;            (is_cmd_option  execute stderr --stderr=tty tty)
P;HTML|
;             (set_option_value  stderr tty)
P;HTML|
;           (set_option_value  prolog false)
P;HTML|
;           (set_option_value  compat auto)
P;HTML|
;           (set_option_value  compatio true)

Script done on 2024-09-29 01:06:28+00:00 [COMMAND_EXIT_CODE="7"]

</pre>
</body>

</html>
\033[0;32mCompleted successfully (EXITCODE=7) Under 40 seconds: ./mettalog '--output=./reports/tests_output/baseline-compat-2024-09-29T00:38:07/' --timeout=40 --html --repl=false  --test "tests/extended_compat/metta-examples/logic/puzzle.metta" --halt=true\033[0m
