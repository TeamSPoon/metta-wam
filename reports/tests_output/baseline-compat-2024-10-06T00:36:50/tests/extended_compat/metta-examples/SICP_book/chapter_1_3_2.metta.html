<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"
>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"
>
<title></title>
<style type="text/css"
>
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content"
>
Script started on 2024-10-06 00:57:58+00:00 [TERM="xterm-256color" TTY="/dev/pts/0" COLUMNS="-1" LINES="-1"]
P;HTML|
;           (set_option_value  prolog false)

P;HTML|
;           (set_option_value  compat auto)

P;HTML|
;           (set_option_value  compatio true)
P;HTML|
;            (is_cmd_option  prescan halt --halt=true true)
P;HTML|
;            (set_option_value  halt true)
P;HTML|
;            (is_cmd_option  prescan stdin --stdin=tty tty)
P;HTML|
;             (set_option_value  stdin tty)
P;HTML|
;            (is_cmd_option  prescan stdout --stdout=tty tty)
P;HTML|
;             (set_option_value  stdout tty)
P;HTML|
;            (is_cmd_option  prescan stderr --stderr=tty tty)
P;HTML|
;             (set_option_value  stderr tty)
P;HTML|
;            (set_option_value  prolog false)
P;HTML|
;            (set_option_value  compat auto)
P;HTML|
;            (set_option_value  compatio true)
P;HTML|
;          (is_cmd_option  execute python --python=enable enable)
P;HTML|
;           (set_option_value  python enable)
P;HTML|
;          (is_cmd_option  execute timeout --timeout=40 40)
P;HTML|
;           (set_option_value  timeout 40)
P;HTML|
;           (is_cmd_option  execute output --output=./reports/tests_output/baseline-compat-2024-10-06T00:36:50/ ./reports/tests_output/baseline-compat-2024-10-06T00:36:50/)
P;HTML|
;           (set_option_value  output ./reports/tests_output/baseline-compat-2024-10-06T00:36:50/)
P;HTML|
;           (is_cmd_option  execute html --html true)
P;HTML|
;            (set_option_value  html true)
P;HTML|
;           (is_cmd_option  execute test --test true)
P;HTML|
;            (set_option_value  test true)

; (load_metta_file  &self tests/extended_compat/metta-examples/SICP_book/chapter_1_3_2.metta)
P;HTML|
;                         (track_load_into_file  /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/SICP_book/chapter_1_3_2.metta)
P;HTML|
;                                          (load_answer_file  /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/SICP_book/chapter_1_3_2.metta.answers /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/SICP_book/chapter_1_3_2.metta)
P;HTML|
;                                           (= 1  "timeout: failed to run command 'time': No such file or directory")
P;HTML|
;                                          (load_answer_file  /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/SICP_book/chapter_1_3_2.metta.answers /home/runner/work/metta-wam/metta-wam/tests/extended_compat/metta-examples/SICP_book/chapter_1_3_2.metta)
P;HTML|
;                                           (= 1  "timeout: failed to run command 'time': No such file or directory")

;;; This script is the second part of chapter 1.3. Chapter was splitted due to different behavior of several functions
;;; using same lambda2 definition. Script chapter_1_3.metta contains functions which need typedef for lambda2.
;;; This script contains functions which works only without typdef from another script.
;;; quoted prevents wrapped atom from being interpreted
<span class="ansi38-255165000"
>  (: quoted 
    (-> Atom Atom))
</span><span class="ansi38-255165000"
>  (: lambda1 
    (-> Variable Atom 
      (-> $a $t)))
</span><span class="ansi38-255165000"
>  (= 
    ( (lambda1 $var $body) $val) 
    (let 
      (quote ($v $b)) 
      (sealed 
        ($var) 
        (quote ($var $body))) 
      (let 
        (quote $v) 
        (quote $val) $b)))
</span>;;; For lambda with two inputs
<span class="ansi38-255165000"
>  (= 
    ( (lambda2 $var1 $var2 $body) $val1 $val2) 
    (let 
      (quote ($v1 $v2 $b)) 
      (sealed 
        ($var1 $var2) 
        (quote ($var1 $var2 $body))) 
      (let 
        (quote ($v1 $v2)) 
        (quote ($val1 $val2)) $b)))
</span>;;; For lambda with three inputs. But actually we will use it to bypass recursive limitation while
;;; defining function using let
<span class="ansi38-255165000"
>  (: lambda3 
    (-> Variable Variable Variable Atom 
      (-> $a $b $c $t)))
</span><span class="ansi38-255165000"
>  (= 
    ( (lambda3 $var1 $var2 $var3 $body) $val1 $val2 $val3) 
    (let 
      (quote ($v1 $v2 $v3 $b)) 
      (sealed 
        ($var1 $var2 $var3) 
        (quote ($var1 $var2 $var3 $body))) 
      (let 
        (quote ($v1 $v2 $v3)) 
        (quote ($val1 $val2 $val3)) $b)))
</span><span class="ansi38-255165000"
>  (= 
    (sqr $x) 
    (* $x $x))
</span>;;; Cube can't be defined as (* $x $x $x) as in Scheme
<span class="ansi38-255165000"
>  (= 
    (cube $x) 
    (* $x 
      (sqr $x)))
</span>;;; Convenient functions
<span class="ansi38-255165000"
>  (= 
    (inc $x) 
    (+ $x 1))
</span><span class="ansi38-255165000"
>  (= 
    (dec $x) 
    (- $x 1))
</span>;;; Since metta currently doesn't support '+', '*' etc with 3+ parameters:
<span class="ansi38-255165000"
>  (= 
    (p4 $a $b $c $d) 
    (+ 
      (+ $a $b) 
      (+ $c $d)))
</span><span class="ansi38-255165000"
>  (= 
    (remainder $x $y) 
    (% $x $y))
</span><span class="ansi38-255165000"
>  (= 
    (Abs $x) 
    (if 
      (< $x 0) 
      (* $x -1) $x))
</span><span class="ansi38-255165000"
>  (= 
    (close-enough? $x $y) 
    (< 
      (Abs (- $x $y)) 0.001))
</span><span class="ansi38-255165000"
>  (= 
    (tolerance) 0.1)
</span>;;; Here we had to switch places for $try and $close-enough local functions definitions (not like in SICP book)
;;; or it just won't work
<span class="ansi38-255165000"
>  (= 
    (fixed-point $f $first-guess) 
    (let $try 
      (lambda2 $guess $self-try 
        (let $next 
          ($f $guess) 
          (let $close-enough? 
            (lambda2 $v1 $v2 
              (< 
                (Abs (- $v1 $v2)) 
                (tolerance))) 
            (if 
              ($close-enough? $guess $next) $next 
              ($self-try $next $self-try))))) 
      ($try $first-guess $try)))
</span><span class="ansi38-013099040"
>  !(assertEqual 
    (fixed-point sqr 0.5) 0.00390625)

</span>[

;<h3 id="SICP-BOOK.CHAPTER-1-3-2.01"
>;; SICP-BOOK.CHAPTER-1-3-2.01</h3>

Script done on 2024-10-06 00:58:38+00:00 [COMMAND_EXIT_CODE="143"]

</pre>
</body>

</html>
\033[1;33mCompleted (EXITCODE=143) Under 40 seconds: ./mettalog '--output=./reports/tests_output/baseline-compat-2024-10-06T00:36:50/' --timeout=40 --html --repl=false  --test "tests/extended_compat/metta-examples/SICP_book/chapter_1_3_2.metta" --halt=true\033[0m
